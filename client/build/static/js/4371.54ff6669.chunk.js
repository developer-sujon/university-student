"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[4371],{9935:function(e,s,r){r.d(s,{S5:function(){return d},j0:function(){return u},zM:function(){return c},zT:function(){return i}});var t=r(4165),n=r(5861),o=r(7218),a=o.E.injectEndpoints({endpoints:function(e){return{coursesList:e.query({query:function(){return{url:"courses/coursesList",method:"GET"}}}),coursesCreate:e.mutation({query:function(e){return{url:"courses/coursesCreate",method:"POST",body:e}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function e(){var r,n,a,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.dispatch,n=s.queryFulfilled,e.prev=1,e.next=4,n;case 4:a=e.sent,u=a.data,r(o.E.util.updateQueryData("coursesList",void 0,(function(e){e.data.push(u.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),coursesUpdate:e.mutation({query:function(e){var s=e.id,r=e.postBody;return{url:"courses/coursesUpdate/".concat(s),method:"PATCH",body:r}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,a,u,i,c;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.id,e.postBody,a=s.dispatch,u=s.queryFulfilled,r.prev=2,r.next=5,u;case 5:i=r.sent,c=i.data,a(o.E.util.updateQueryData("coursesList",void 0,(function(e){var s,r,t,o,a,u=e.data.findIndex((function(e){return e.id===n}));e.data[u].coursesCode=null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.coursesCode,e.data[u].coursesName=null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.coursesName,e.data[u].coursesInstructor=null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.coursesInstructor,e.data[u].seatsLimit=null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.seatsLimit,e.data[u].registrationDeadline=null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.registrationDeadline}))),r.next=12;break;case 10:r.prev=10,r.t0=r.catch(2);case 12:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}),coursesDelete:e.mutation({query:function(e){return{url:"courses/coursesDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,a,u;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=s.dispatch,a=s.queryFulfilled,u=n(o.E.util.updateQueryData("coursesList",void 0,(function(s){s.data=s.data.filter((function(s){return s.id!==e}))}))),r.prev=2,r.next=5,a;case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),u.undo();case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()}})}}}),u=a.useCoursesCreateMutation,i=a.useCoursesListQuery,c=a.useCoursesUpdateMutation,d=a.useCoursesDeleteMutation},8462:function(e,s,r){r.d(s,{Hq:function(){return i},T6:function(){return d},TX:function(){return u},Tn:function(){return c},uM:function(){return l}});var t=r(4165),n=r(5861),o=r(7218),a=o.E.injectEndpoints({endpoints:function(e){return{sessionList:e.query({query:function(){return{url:"session/sessionList",method:"GET"}}}),sessionDropDown:e.query({query:function(){return{url:"session/sessionDropDown",method:"GET"}}}),sessionCreate:e.mutation({query:function(e){return{url:"session/sessionCreate",method:"POST",body:e}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function e(){var r,n,a,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.dispatch,n=s.queryFulfilled,e.prev=1,e.next=4,n;case 4:a=e.sent,u=a.data,r(o.E.util.updateQueryData("sessionList",void 0,(function(e){e.data.push(u.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),sessionUpdate:e.mutation({query:function(e){var s=e.id,r=e.postBody;return{url:"session/sessionUpdate/".concat(s),method:"PATCH",body:r}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,a,u,i,c;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.id,e.postBody,a=s.dispatch,u=s.queryFulfilled,r.prev=2,r.next=5,u;case 5:i=r.sent,c=i.data,a(o.E.util.updateQueryData("sessionList",void 0,(function(e){var s,r,t=e.data.findIndex((function(e){return e.id===n}));e.data[t].sessionName=null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.sessionName,e.data[t].sessionYear=null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.sessionYear}))),r.next=12;break;case 10:r.prev=10,r.t0=r.catch(2);case 12:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}),sessionDelete:e.mutation({query:function(e){return{url:"session/sessionDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,a,u;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=s.dispatch,a=s.queryFulfilled,u=n(o.E.util.updateQueryData("sessionList",void 0,(function(s){s.data=s.data.filter((function(s){return s.id!==e}))}))),r.prev=2,r.next=5,a;case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),u.undo();case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()}})}}}),u=a.useSessionCreateMutation,i=a.useSessionListQuery,c=a.useSessionUpdateMutation,d=a.useSessionDeleteMutation,l=a.useSessionDropDownQuery},4371:function(e,s,r){r.r(s);var t=r(9439),n=r(2791),o=r(7689),a=r(7022),u=r(9140),i=r(9743),c=r(2677),d=r(5630),l=r(3360),f=r(4849),m=r(9230),h=r(1134),v=r(4695),p=r(8007),x=r(7605),Z=r(1724),j=r(9935),g=r(1239),y=r(8462),C=r(184);s.default=function(){var e=(0,n.useState)(null),s=(0,t.Z)(e,2),r=s[0],D=s[1],L=(0,n.useState)({coursesCode:"",coursesName:"",coursesInstructor:"",seatsLimit:0,registrationDeadline:(0,g.p6)(new Date)}),b=(0,t.Z)(L,2),q=b[0],w=b[1],N=(0,m.$G)().t,S=(0,o.s0)(),I=(0,j.zT)().data,E=(0,y.uM)(),T=E.data,Q=(E.isLoading,(0,j.j0)()),k=(0,t.Z)(Q,2),M=k[0],B=k[1],z=B.isLoading,G=B.isSuccess,F=(0,j.zM)(),P=(0,t.Z)(F,2),V=P[0],U=P[1],Y=U.isLoading,R=U.isSuccess;(0,n.useEffect)((function(){var e,s=new URLSearchParams(window.location.search).get("id");(null!==s&&D(s),r&&I)&&w(null===I||void 0===I||null===(e=I.data)||void 0===e?void 0:e.find((function(e){return e.id===r})))}),[r,I]);var _=(0,h.cI)({mode:"onChange",defaultValues:q,resolver:(0,v.X)(p.Ry({coursesCode:p.Z_().required(N("courses name is required")),coursesName:p.Z_().required(N("courses name is required")),coursesInstructor:p.Z_().required(N("courses instructor is required")),seatsLimit:p.Rx(N("seats limit is required")).required(N("seats limit is required")).min(1,"seats limit must be greater than or equal to 1"),registrationDeadline:p.hT().required(N("courses registration deadline is required"))}))}),H=_.control,A=_.handleSubmit,O=_.reset,X=(_.watch,_.setValue,_.formState.errors);(0,n.useEffect)((function(){q&&O(q)}),[q]);return(0,n.useEffect)((function(){(G||R)&&S("/elective-courses")}),[G,R]),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(a.Z,{children:(0,C.jsx)(u.Z,{children:(0,C.jsx)(u.Z.Body,{children:(0,C.jsxs)(i.Z,{children:[(0,C.jsx)("h5",{children:N("".concat(r?"update courses":"save courses"))}),(0,C.jsx)("hr",{className:"bg-light"}),(0,C.jsx)(c.Z,{children:(0,C.jsxs)(d.Z,{onSubmit:A((function(e){var s={coursesCode:e.coursesCode,coursesName:e.coursesName,coursesInstructor:e.coursesInstructor,seatsLimit:e.seatsLimit,registrationDeadline:e.registrationDeadline,allowSessions:e.allowSessions};r?V({id:r,postBody:s}):M(s)})),onReset:O,children:[(0,C.jsxs)(i.Z,{class:!0,children:[(0,C.jsx)(c.Z,{sm:4,children:(0,C.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesCode",children:[(0,C.jsx)(d.Z.Label,{children:N("courses code")}),(0,C.jsx)(h.Qr,{control:H,name:"coursesCode",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,C.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:X.coursesCode,placeholder:N("courses code of the courses"),type:"text",size:"sm"})}}),X.coursesCode&&(0,C.jsx)(d.Z.Text,{className:"text-danger",children:X.coursesCode.message})]})}),(0,C.jsx)(c.Z,{sm:4,children:(0,C.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesName",children:[(0,C.jsx)(d.Z.Label,{children:N("courses name")}),(0,C.jsx)(h.Qr,{control:H,name:"coursesName",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,C.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:X.coursesName,placeholder:N("courses name of the courses"),type:"text",size:"sm"})}}),X.coursesName&&(0,C.jsx)(d.Z.Text,{className:"text-danger",children:X.coursesName.message})]})}),(0,C.jsx)(c.Z,{sm:4,children:(0,C.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesInstructor",children:[(0,C.jsx)(d.Z.Label,{children:N("courses instructor")}),(0,C.jsx)(h.Qr,{control:H,name:"coursesInstructor",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,C.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:X.coursesInstructor,placeholder:N("courses instructor of the courses"),type:"text",size:"sm"})}}),X.coursesInstructor&&(0,C.jsx)(d.Z.Text,{className:"text-danger",children:X.coursesInstructor.message})]})}),(0,C.jsx)(c.Z,{sm:4,children:(0,C.jsxs)(d.Z.Group,{className:"mb-3",controlId:"seatsLimit",children:[(0,C.jsx)(d.Z.Label,{children:N("seats limit")}),(0,C.jsx)(h.Qr,{control:H,name:"seatsLimit",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,C.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:X.seatsLimit,placeholder:N("seats limit of the courses"),type:"number",size:"sm"})}}),X.seatsLimit&&(0,C.jsx)(d.Z.Text,{className:"text-danger",children:X.seatsLimit.message})]})}),(0,C.jsx)(c.Z,{sm:4,children:(0,C.jsxs)(d.Z.Group,{className:"mb-3",controlId:"registrationDeadline",children:[(0,C.jsx)(d.Z.Label,{children:N("registration deadline")}),(0,C.jsx)(h.Qr,{control:H,name:"registrationDeadline",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,C.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:X.registrationDeadline,type:"date",size:"sm"})}}),X.registrationDeadline&&(0,C.jsx)(d.Z.Text,{className:"text-danger",children:X.registrationDeadline.message})]})}),(0,C.jsx)(c.Z,{sm:4,children:(0,C.jsxs)(d.Z.Group,{className:"mb-3",controlId:"allowSessions",children:[(0,C.jsx)(d.Z.Label,{children:N("allow sessions")}),(0,C.jsx)(h.Qr,{control:H,name:"allowSessions",defaultValue:null===T||void 0===T?void 0:T.data.map((function(e){return e.value})),render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value,s.ref);return(0,C.jsx)(x.ZP,{inputRef:t,onChange:function(e){return r(e.map((function(e){return e.label})))},isMulti:!0,options:null===T||void 0===T?void 0:T.data,className:"basic-multi-select",classNamePrefix:"select"})}}),X.allowSessions&&(0,C.jsx)(d.Z.Text,{className:"text-danger",children:X.allowSessions.message})]})})]}),(0,C.jsx)(i.Z,{children:(0,C.jsx)(c.Z,{sm:4,children:(0,C.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:z||Y?(0,C.jsx)(f.Z,{size:"sm",color:"light"}):N("save change")})})})]})})]})})})})})}},1239:function(e,s,r){r.d(s,{p6:function(){return a}});r(2791);var t=r(6431),n=r.n(t),o=r(184);function a(e){var s=new Date(e),r=""+(s.getMonth()+1),t=""+s.getDate(),n=s.getFullYear();return r.length<2&&(r="0"+r),t.length<2&&(t="0"+t),[n,r,t].join("-")}s.ZP=function(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n(),{format:"D MMM YYYY",withTitle:!0,children:e})," ",(0,o.jsx)("br",{})]})}}}]);
//# sourceMappingURL=4371.54ff6669.chunk.js.map