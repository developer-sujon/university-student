"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[371],{9935:function(e,s,r){r.d(s,{S5:function(){return d},j0:function(){return a},zM:function(){return i},zT:function(){return c}});var t=r(4165),n=r(5861),u=r(7218),o=u.E.injectEndpoints({endpoints:function(e){return{coursesList:e.query({query:function(){return{url:"courses/coursesList",method:"GET"}}}),coursesCreate:e.mutation({query:function(e){return{url:"courses/coursesCreate",method:"POST",body:e}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function e(){var r,n,o,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.dispatch,n=s.queryFulfilled,e.prev=1,e.next=4,n;case 4:o=e.sent,a=o.data,r(u.E.util.updateQueryData("coursesList",void 0,(function(e){e.data.push(a.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),coursesUpdate:e.mutation({query:function(e){var s=e.id,r=e.postBody;return{url:"courses/coursesUpdate/".concat(s),method:"PATCH",body:r}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,o,a,c,i;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.id,e.postBody,o=s.dispatch,a=s.queryFulfilled,r.prev=2,r.next=5,a;case 5:c=r.sent,i=c.data,o(u.E.util.updateQueryData("coursesList",void 0,(function(e){var s,r,t,u,o=e.data.findIndex((function(e){return e.id===n}));e.data[o].coursesCode=null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.coursesCode,e.data[o].coursesName=null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.coursesName,e.data[o].coursesInstructor=null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.coursesInstructor,e.data[o].seatsLimit=null===i||void 0===i||null===(u=i.data)||void 0===u?void 0:u.seatsLimit}))),r.next=12;break;case 10:r.prev=10,r.t0=r.catch(2);case 12:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}),coursesDelete:e.mutation({query:function(e){return{url:"courses/coursesDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,o,a;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=s.dispatch,o=s.queryFulfilled,a=n(u.E.util.updateQueryData("coursesList",void 0,(function(s){s.data=s.data.filter((function(s){return s.id!==e}))}))),r.prev=2,r.next=5,o;case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),a.undo();case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()}})}}}),a=o.useCoursesCreateMutation,c=o.useCoursesListQuery,i=o.useCoursesUpdateMutation,d=o.useCoursesDeleteMutation},4371:function(e,s,r){r.r(s);var t=r(9439),n=r(2791),u=r(7689),o=r(7022),a=r(9140),c=r(9743),i=r(2677),d=r(5630),l=r(3360),m=r(4849),f=r(9230),h=r(1134),x=r(4695),v=r(8007),p=r(1724),Z=r(9935),j=(r(1239),r(184));s.default=function(){var e=(0,n.useState)(null),s=(0,t.Z)(e,2),r=s[0],C=s[1],g=(0,n.useState)({coursesCode:"",coursesName:"",coursesInstructor:"",seatsLimit:""}),y=(0,t.Z)(g,2),L=y[0],b=y[1],I=(0,f.$G)().t,N=(0,u.s0)(),q=(0,Z.zT)().data,w=(0,Z.j0)(),S=(0,t.Z)(w,2),E=S[0],Q=S[1],T=Q.isLoading,k=Q.isSuccess,z=(0,Z.zM)(),D=(0,t.Z)(z,2),M=D[0],B=D[1],G=B.isLoading,V=B.isSuccess;(0,n.useEffect)((function(){var e,s=new URLSearchParams(window.location.search).get("id");(null!==s&&C(s),r&&q)&&b(null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.find((function(e){return e.id===r})))}),[r,q]);var F=(0,h.cI)({mode:"onChange",defaultValues:L,resolver:(0,x.X)(v.Ry({coursesCode:v.Z_().required(I("courses name is required")),coursesName:v.Z_().required(I("courses name is required")),coursesInstructor:v.Z_().required(I("courses instructor is required")),seatsLimit:v.Rx().required(I("seats limit is required")).min(1,"seats limit must be greater than or equal to 1")}))}),Y=F.control,_=F.handleSubmit,P=F.reset,R=(F.watch,F.setValue,F.formState.errors);(0,n.useEffect)((function(){L&&P(L)}),[L]);return(0,n.useEffect)((function(){(k||V)&&N("/elective-courses")}),[k,V]),(0,j.jsx)(p.Z,{children:(0,j.jsx)(o.Z,{children:(0,j.jsx)(a.Z,{children:(0,j.jsx)(a.Z.Body,{children:(0,j.jsxs)(c.Z,{children:[(0,j.jsx)("h5",{children:I("".concat(r?"update courses":"save courses"))}),(0,j.jsx)("hr",{className:"bg-light"}),(0,j.jsx)(i.Z,{children:(0,j.jsxs)(d.Z,{onSubmit:_((function(e){var s={coursesCode:e.coursesCode,coursesName:e.coursesName,coursesInstructor:e.coursesInstructor,seatsLimit:e.seatsLimit};r?M({id:r,postBody:s}):E(s)})),onReset:P,children:[(0,j.jsxs)(c.Z,{class:!0,children:[(0,j.jsx)(i.Z,{sm:4,children:(0,j.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesCode",children:[(0,j.jsx)(d.Z.Label,{children:I("courses code")}),(0,j.jsx)(h.Qr,{control:Y,name:"coursesCode",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,j.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:R.coursesCode,placeholder:I("courses code of the Courses"),type:"text",size:"sm"})}}),R.coursesCode&&(0,j.jsx)(d.Z.Text,{className:"text-danger",children:R.coursesCode.message})]})}),(0,j.jsx)(i.Z,{sm:4,children:(0,j.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesName",children:[(0,j.jsx)(d.Z.Label,{children:I("courses name")}),(0,j.jsx)(h.Qr,{control:Y,name:"coursesName",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,j.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:R.coursesName,placeholder:I("courses name of the Courses"),type:"text",size:"sm"})}}),R.coursesName&&(0,j.jsx)(d.Z.Text,{className:"text-danger",children:R.coursesName.message})]})}),(0,j.jsx)(i.Z,{sm:4,children:(0,j.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesInstructor",children:[(0,j.jsx)(d.Z.Label,{children:I("courses instructor")}),(0,j.jsx)(h.Qr,{control:Y,name:"coursesInstructor",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,j.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:R.coursesInstructor,placeholder:I("courses instructor of the Courses"),type:"text",size:"sm"})}}),R.coursesInstructor&&(0,j.jsx)(d.Z.Text,{className:"text-danger",children:R.coursesInstructor.message})]})}),(0,j.jsx)(i.Z,{sm:4,children:(0,j.jsxs)(d.Z.Group,{className:"mb-3",controlId:"seatsLimit",children:[(0,j.jsx)(d.Z.Label,{children:I("seats limit")}),(0,j.jsx)(h.Qr,{control:Y,name:"seatsLimit",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,j.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:R.seatsLimit,placeholder:I("seats limit of the Courses"),type:"text",size:"sm"})}}),R.seatsLimit&&(0,j.jsx)(d.Z.Text,{className:"text-danger",children:R.seatsLimit.message})]})})]}),(0,j.jsx)(c.Z,{children:(0,j.jsx)(i.Z,{sm:4,children:(0,j.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:T||G?(0,j.jsx)(m.Z,{size:"sm",color:"light"}):I("save change")})})})]})})]})})})})})}},1239:function(e,s,r){r.d(s,{p6:function(){return o}});r(2791);var t=r(6431),n=r.n(t),u=r(184);function o(e){var s=new Date(e),r=""+(s.getMonth()+1),t=""+s.getDate(),n=s.getFullYear();return r.length<2&&(r="0"+r),t.length<2&&(t="0"+t),[n,r,t].join("-")}s.ZP=function(e){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n(),{format:"D MMM YYYY",withTitle:!0,children:e})," ",(0,u.jsx)("br",{})]})}}}]);
//# sourceMappingURL=371.dcea1507.chunk.js.map