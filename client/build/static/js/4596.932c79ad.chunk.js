"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[4596],{7450:function(e,s,t){t.d(s,{TC:function(){return c},e_:function(){return i},qD:function(){return d},zC:function(){return o}});var n=t(4165),r=t(5861),a=t(7218),u=a.E.injectEndpoints({endpoints:function(e){return{retakeAssessmentList:e.query({query:function(){return{url:"retakeAssessment/retakeAssessmentList",method:"GET"}}}),retakeAssessmentCreate:e.mutation({query:function(e){return{url:"retakeAssessment/retakeAssessmentCreate",method:"POST",body:e}},onQueryStarted:function(e,s){return(0,r.Z)((0,n.Z)().mark((function e(){var t,r,u,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.dispatch,r=s.queryFulfilled,e.prev=1,e.next=4,r;case 4:u=e.sent,i=u.data,t(a.E.util.updateQueryData("retakeAssessmentList",void 0,(function(e){e.data.push(i.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),retakeAssessmentUpdate:e.mutation({query:function(e){var s=e.id,t=e.postBody;return{url:"retakeAssessment/retakeAssessmentUpdate/".concat(s),method:"PATCH",body:t}},onQueryStarted:function(e,s){return(0,r.Z)((0,n.Z)().mark((function t(){var r,u,i,o,c;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.id,e.postBody,u=s.dispatch,i=s.queryFulfilled,t.prev=2,t.next=5,i;case 5:o=t.sent,c=o.data,u(a.E.util.updateQueryData("retakeAssessmentList",void 0,(function(e){var s,t=e.data.findIndex((function(e){return e.id===r}));e.data[t].assessmentType=null===c||void 0===c?void 0:c.data.assessmentType,e.data[t].instructor=null===c||void 0===c?void 0:c.data.instructor,e.data[t].reason=null===c||void 0===c?void 0:c.data.reason,e.data[t].status=null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.status,e.data[t].studentID=null===c||void 0===c?void 0:c.data.studentID,e.data[t].subject=null===c||void 0===c?void 0:c.data.subject}))),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}}),t,null,[[2,10]])})))()}}),retakeAssessmentDelete:e.mutation({query:function(e){return{url:"retakeAssessment/retakeAssessmentDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,s){return(0,r.Z)((0,n.Z)().mark((function t(){var r,u,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.dispatch,u=s.queryFulfilled,i=r(a.E.util.updateQueryData("retakeAssessmentList",void 0,(function(s){s.data=s.data.filter((function(s){return s.id!==e}))}))),t.prev=2,t.next=5,u;case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),i.undo();case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))()}})}}}),i=u.useRetakeAssessmentCreateMutation,o=u.useRetakeAssessmentListQuery,c=u.useRetakeAssessmentUpdateMutation,d=u.useRetakeAssessmentDeleteMutation},4596:function(e,s,t){t.r(s);var n=t(9439),r=t(2791),a=t(7689),u=t(7022),i=t(9140),o=t(9743),c=t(2677),d=t(5630),l=t(3360),m=t(4849),h=t(9230),f=t(1134),p=t(4695),x=t(8007),v=t(1724),j=t(7450),Z=t(184);s.default=function(){var e=(0,r.useState)(null),s=(0,n.Z)(e,2),t=s[0],y=s[1],k=(0,r.useState)({subject:"",instructor:"",assessmentType:"",reason:""}),b=(0,n.Z)(k,2),g=b[0],A=b[1],C=(0,h.$G)().t,T=(0,a.s0)(),I=(0,j.zC)().data,q=(0,j.e_)(),L=(0,n.Z)(q,2),E=L[0],Q=L[1],S=Q.isLoading,D=Q.isSuccess,N=(0,j.TC)(),w=(0,n.Z)(N,2),_=w[0],R=w[1],z=R.isLoading,B=R.isSuccess;(0,r.useEffect)((function(){var e,s=new URLSearchParams(window.location.search).get("id");(null!==s&&y(s),t&&I)&&A(null===I||void 0===I||null===(e=I.data)||void 0===e?void 0:e.find((function(e){return e.id===t})))}),[t,I]);var M=(0,f.cI)({mode:"onChange",defaultValues:g,resolver:(0,p.X)(x.Ry({subject:x.Z_().required(C("subject is required")),instructor:x.Z_().required(C("instructor is required")),assessmentType:x.Z_().required(C("assessment type is required")),reason:x.Z_().required(C("reason is required"))}))}),G=M.control,U=M.handleSubmit,F=M.reset,V=M.formState.errors;(0,r.useEffect)((function(){g&&F(g)}),[g]);return(0,r.useEffect)((function(){(D||B)&&T("/retake-assessment")}),[D,B]),(0,Z.jsx)(v.Z,{children:(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(i.Z,{children:(0,Z.jsx)(i.Z.Body,{children:(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)("h5",{children:C("".concat(t?"update retake assessment":"save retake assessment"))}),(0,Z.jsx)("hr",{className:"bg-light"}),(0,Z.jsx)(c.Z,{children:(0,Z.jsxs)(d.Z,{onSubmit:U((function(e){var s={subject:e.subject,instructor:e.instructor,assessmentType:e.assessmentType,reason:e.reason};t?_({id:t,postBody:s}):E(s)})),onReset:F,children:[(0,Z.jsxs)(o.Z,{class:!0,children:[(0,Z.jsx)(c.Z,{sm:4,children:(0,Z.jsxs)(d.Z.Group,{className:"mb-3",controlId:"subject",children:[(0,Z.jsx)(d.Z.Label,{children:C("subject")}),(0,Z.jsx)(f.Qr,{control:G,name:"subject",render:function(e){var s=e.field,t=s.onChange,n=(s.onBlur,s.value),r=s.ref;return(0,Z.jsx)(d.Z.Control,{onChange:t,defaultValue:n,ref:r,isInvalid:V.subject,placeholder:C("subject of the retake assessment"),type:"text",size:"sm"})}}),V.subject&&(0,Z.jsx)(d.Z.Text,{className:"text-danger",children:V.subject.message})]})}),(0,Z.jsx)(c.Z,{sm:4,children:(0,Z.jsxs)(d.Z.Group,{className:"mb-3",controlId:"instructor",children:[(0,Z.jsx)(d.Z.Label,{children:C("instructor")}),(0,Z.jsx)(f.Qr,{control:G,name:"instructor",render:function(e){var s=e.field,t=s.onChange,n=(s.onBlur,s.value),r=s.ref;return(0,Z.jsx)(d.Z.Control,{onChange:t,defaultValue:n,ref:r,isInvalid:V.instructor,placeholder:C("instructor of the retake assessment"),type:"text",size:"sm"})}}),V.instructor&&(0,Z.jsx)(d.Z.Text,{className:"text-danger",children:V.instructor.message})]})}),(0,Z.jsx)(c.Z,{sm:4,children:(0,Z.jsxs)(d.Z.Group,{className:"mb-3",controlId:"assessmentType",children:[(0,Z.jsx)(d.Z.Label,{children:C("assessment type")}),(0,Z.jsx)(f.Qr,{control:G,name:"assessmentType",render:function(e){var s=e.field,t=s.onChange,n=(s.onBlur,s.value),r=s.ref;return(0,Z.jsxs)(d.Z.Select,{onChange:t,value:n,ref:r,isInvalid:V.status,placeholder:C("assessment type of the retake assessment"),type:"text",size:"sm",children:[(0,Z.jsx)("option",{value:"",children:C("choice assessment")}),(0,Z.jsx)("option",{value:"QUIZ",children:C("QUIZ")}),(0,Z.jsx)("option",{value:"MID_TERM",children:C("MID_TERM")}),(0,Z.jsx)("option",{value:"FINAL",children:C("FINAL")})]})}}),V.assessmentType&&(0,Z.jsx)(d.Z.Text,{className:"text-danger",children:V.assessmentType.message})]})}),(0,Z.jsx)(c.Z,{sm:12,children:(0,Z.jsxs)(d.Z.Group,{className:"mb-3",controlId:"reason",children:[(0,Z.jsx)(d.Z.Label,{children:C("reason")}),(0,Z.jsx)(f.Qr,{control:G,name:"reason",render:function(e){var s=e.field,t=s.onChange,n=(s.onBlur,s.value),r=s.ref;return(0,Z.jsx)(d.Z.Control,{onChange:t,defaultValue:n,ref:r,isInvalid:V.reason,placeholder:C("reason registration of the retake assessment"),as:"textarea",size:"sm"})}}),V.reason&&(0,Z.jsx)(d.Z.Text,{className:"text-danger",children:V.reason.message})]})})]}),(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(c.Z,{sm:4,children:(0,Z.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:S||z?(0,Z.jsx)(m.Z,{size:"sm",color:"light"}):C("save change")})})})]})})]})})})})})}}}]);
//# sourceMappingURL=4596.932c79ad.chunk.js.map