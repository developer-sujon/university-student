"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[984],{916:function(e,t,n){n.d(t,{op:function(){return l},sW:function(){return u},tb:function(){return o},wS:function(){return s}});var a=n(4165),d=n(5861),r=n(7218),i=r.E.injectEndpoints({endpoints:function(e){return{leaveList:e.query({query:function(){return{url:"leave/leaveList",method:"GET"}}}),leaveCreate:e.mutation({query:function(e){return{url:"leave/leaveCreate",method:"POST",body:e}},onQueryStarted:function(e,t){return(0,d.Z)((0,a.Z)().mark((function e(){var n,d,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,d=t.queryFulfilled,e.prev=1,e.next=4,d;case 4:i=e.sent,l=i.data,n(r.E.util.updateQueryData("leaveList",void 0,(function(e){e.data.push(l.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),leaveUpdate:e.mutation({query:function(e){var t=e.id,n=e.postBody;return{url:"leave/leaveUpdate/".concat(t),method:"PATCH",body:n}},onQueryStarted:function(e,t){return(0,d.Z)((0,a.Z)().mark((function n(){var d,i,l,s,o;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=e.id,e.postBody,i=t.dispatch,l=t.queryFulfilled,n.prev=2,n.next=5,l;case 5:s=n.sent,o=s.data,i(r.E.util.updateQueryData("leaveList",void 0,(function(e){var t,n,a,r,i,l,s,u=e.data.findIndex((function(e){return e.id===d}));e.data[u].duration=null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.duration,e.data[u].endDate=null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.endDate,e.data[u].reason=null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.reason,e.data[u].startDate=null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.startDate,e.data[u].status=null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.status,e.data[u].studentID=null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.studentID,e.data[u].subject=null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.subject}))),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(2);case 12:case"end":return n.stop()}}),n,null,[[2,10]])})))()}}),leaveDelete:e.mutation({query:function(e){return{url:"leave/leaveDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,t){return(0,d.Z)((0,a.Z)().mark((function n(){var d,i,l;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d=t.dispatch,i=t.queryFulfilled,l=d(r.E.util.updateQueryData("leaveList",void 0,(function(t){t.data=t.data.filter((function(t){return t.id!==e}))}))),n.prev=2,n.next=5,i;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),l.undo();case 10:case"end":return n.stop()}}),n,null,[[2,7]])})))()}})}}}),l=i.useLeaveCreateMutation,s=i.useLeaveListQuery,o=i.useLeaveUpdateMutation,u=i.useLeaveDeleteMutation},6984:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var a=n(5987),d=n(9439),r=n(2791),i=n(5736),l=n(7798),s=n(2576),o=n(3360),u=n(7022),c=n(9140),v=n(9743),p=n(2677),h=n(4849),x=n(9230),f=n(8820),j=n(1087),Z=n(9126),m=n(6053),y=n(1724),D=n(916),b=n(283),N=n(1828),g=n(1239),w=n(396),E=n(5316),S=n(184),k=function(e){var t=e.show,n=e.handleClose,a=e.singleLeave,d=(0,x.$G)().t;return(0,S.jsxs)(E.Z,{show:t,onHide:n,children:[(0,S.jsx)(E.Z.Header,{closeButton:!0,children:(0,S.jsxs)(E.Z.Title,{children:[d("subject"),": ",a.subject]})}),(0,S.jsxs)(E.Z.Body,{children:[(0,S.jsxs)("p",{children:[d("reason"),": ",a.reason]}),(0,S.jsxs)("p",{children:[d("start date"),": ",a.startDate]}),(0,S.jsxs)("p",{children:[d("end date"),": ",a.endDate]}),(0,S.jsxs)("p",{children:[d("duration"),": ",a.duration]})]}),(0,S.jsx)(E.Z.Footer,{children:(0,S.jsx)(o.Z,{variant:"primary",onClick:n,children:d("close")})})]})},I=["id","createdAt","updatedAt","studentID"],C=function(){var e,t=(0,r.useState)({}),n=(0,d.Z)(t,2),E=n[0],C=n[1],L=(0,r.useState)(!1),T=(0,d.Z)(L,2),P=T[0],M=T[1],A=(0,x.$G)().t,H=(0,D.wS)(),U=H.data,q=H.isLoading,Q=(0,D.sW)(),G=(0,d.Z)(Q,1)[0],F=(null===U||void 0===U?void 0:U.data)||[],Y=(0,w.IQ)().data,z=(0,D.tb)(),B=(0,d.Z)(z,1)[0],$=function(e){C(e),M(!0)},O=[{Header:"#",accessor:function(e,t){return t+1},sort:!0},{Header:A("student id"),accessor:function(e){return(0,S.jsxs)("span",{className:"ms-1",children:[" ",e.studentID]})},sort:!0},{Header:A("subject"),accessor:function(e){return(0,S.jsxs)("span",{className:"ms-1",children:[" ",e.subject]})},sort:!0},{Header:A("status"),accessor:function(e){return(0,S.jsx)("div",{className:"bodySmall",children:"PENDING"===(null===e||void 0===e?void 0:e.status)?(0,S.jsx)(i.Z,{bg:"primary",pill:!0,children:(0,S.jsx)("span",{className:"ms-1",children:A(null===e||void 0===e?void 0:e.status)})}):"REJECTED"===(null===e||void 0===e?void 0:e.status)?(0,S.jsx)(i.Z,{bg:"danger",pill:!0,children:(0,S.jsx)("span",{className:"ms-1",children:A(null===e||void 0===e?void 0:e.status)})}):"APPROVED"===(null===e||void 0===e?void 0:e.status)?(0,S.jsx)(i.Z,{bg:"success",pill:!0,children:(0,S.jsx)("span",{className:"ms-1",children:A(null===e||void 0===e?void 0:e.status)})}):""})},sort:!0},{Header:A("start date"),accessor:function(e){return(0,g.ZP)(null===e||void 0===e?void 0:e.startDate)},sort:!0},{Header:A("end date"),accessor:function(e){return(0,g.ZP)(null===e||void 0===e?void 0:e.endDate)},sort:!0},{Header:A("duration"),accessor:function(e){return(0,S.jsxs)("span",{className:"ms-1",children:[" ",e.duration]})},sort:!0},{Header:A("action"),accessor:function(e){var t,n,d,r,i;return(0,S.jsxs)("div",{className:"bodySmall",children:[(0,S.jsx)(l.Z,{placement:"top",delay:{show:250,hide:400},overlay:(0,S.jsx)(s.Z,{id:"button-tooltip",children:A("view")}),children:(0,S.jsx)(o.Z,{variant:"primary",style:{padding:"5px 10px"},onClick:function(){return $(e)},children:(0,S.jsx)(f.$aU,{})})}),"STUDENT"!==(null===Y||void 0===Y||null===(t=Y.data)||void 0===t?void 0:t.role)&&(0,S.jsx)(l.Z,{placement:"top",delay:{show:250,hide:400},overlay:(0,S.jsx)(s.Z,{id:"button-tooltip",children:A("status")}),children:(0,S.jsx)(o.Z,{className:"mr-10",variant:"warning",style:{padding:"5px 10px"},onClick:function(){return function(e){var t=e.id,n=(e.createdAt,e.updatedAt,e.studentID,(0,a.Z)(e,I));N.Z.StatusUpdate(t,n,B)}(e)},children:(0,S.jsx)(m.aXP,{})})}),(0,S.jsx)(l.Z,{placement:"top",delay:{show:250,hide:400},overlay:(0,S.jsx)(s.Z,{id:"button-tooltip",children:A("edit")}),children:(0,S.jsx)(j.rU,{to:"/leave-create-update?id=".concat(null===e||void 0===e?void 0:e.id),onClick:function(t){var n,a;return"PENDING"!==(null===e||void 0===e?void 0:e.status)&&"STUDENT"===(null===Y||void 0===Y||null===(n=Y.data)||void 0===n?void 0:n.role)||"ADMIN"===(null===Y||void 0===Y||null===(a=Y.data)||void 0===a?void 0:a.role)?t.preventDefault():void 0},children:(0,S.jsx)(o.Z,{variant:"primary",style:{padding:"5px 10px"},className:"me-1",disabled:"PENDING"!==(null===e||void 0===e?void 0:e.status)&&"STUDENT"===(null===Y||void 0===Y||null===(n=Y.data)||void 0===n?void 0:n.role)||"ADMIN"===(null===Y||void 0===Y||null===(d=Y.data)||void 0===d?void 0:d.role),children:(0,S.jsx)(f.$iz,{})})})}),(0,S.jsx)(l.Z,{placement:"top",delay:{show:250,hide:400},overlay:(0,S.jsx)(s.Z,{id:"button-tooltip",children:A("delete")}),children:(0,S.jsx)(o.Z,{variant:"danger",style:{padding:"5px 10px"},onClick:function(){return t=e.id,void N.Z.Delete(t,G);var t},disabled:"PENDING"!==(null===e||void 0===e?void 0:e.status)&&"STUDENT"===(null===Y||void 0===Y||null===(r=Y.data)||void 0===r?void 0:r.role)||"ADMIN"===(null===Y||void 0===Y||null===(i=Y.data)||void 0===i?void 0:i.role),children:(0,S.jsx)(Z.yvY,{})})})]})}}],R=[{text:A("5"),value:5},{text:A("10"),value:10},{text:A("25"),value:25},{text:A("all"),value:null===F||void 0===F?void 0:F.length}];return(0,S.jsxs)(y.Z,{children:[(0,S.jsx)(u.Z,{children:(0,S.jsx)(c.Z,{children:(0,S.jsx)(c.Z.Body,{children:(0,S.jsxs)(v.Z,{children:[(0,S.jsxs)(p.Z,{className:"d-flex justify-content-between p-2",sm:12,children:[(0,S.jsx)("h5",{children:A("leave")}),(0,S.jsx)(j.rU,{to:"/leave-create-update",onClick:function(e){var t;return"ADMIN"===(null===Y||void 0===Y||null===(t=Y.data)||void 0===t?void 0:t.role)?e.preventDefault():void 0},children:(0,S.jsx)(o.Z,{size:"sm",variant:"primary",disabled:"ADMIN"===(null===Y||void 0===Y||null===(e=Y.data)||void 0===e?void 0:e.role),children:A("create leave")})})]}),(0,S.jsx)(p.Z,{sm:12,children:q?(0,S.jsx)(h.Z,{size:"lg",variant:"primary"}):null!==F&&void 0!==F&&F.length?(0,S.jsx)(b.Z,{columns:O,data:F,pageSize:5,sizePerPageList:R,isSortable:!0,pagination:!0}):A("no data found")})]})})})}),(0,S.jsx)(k,{singleLeave:E,show:P,handleClose:function(){return M(!1)}})]})}},1239:function(e,t,n){n.d(t,{p6:function(){return i}});n(2791);var a=n(6431),d=n.n(a),r=n(184);function i(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),d=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[d,n,a].join("-")}t.ZP=function(e){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d(),{format:"D MMM YYYY",withTitle:!0,children:e})," ",(0,r.jsx)("br",{})]})}}}]);
//# sourceMappingURL=984.5baa8afa.chunk.js.map