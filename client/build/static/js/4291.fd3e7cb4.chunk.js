"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[4291],{6378:function(e,t,r){r.d(t,{FE:function(){return o},ds:function(){return c},fw:function(){return d},kX:function(){return u}});var n=r(4165),s=r(5861),a=r(7218),i=a.E.injectEndpoints({endpoints:function(e){return{othersList:e.query({query:function(){return{url:"others/othersList",method:"GET"}}}),othersCreate:e.mutation({query:function(e){return{url:"others/othersCreate",method:"POST",body:e}},onQueryStarted:function(e,t){return(0,s.Z)((0,n.Z)().mark((function e(){var r,s,i,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,s=t.queryFulfilled,e.prev=1,e.next=4,s;case 4:i=e.sent,u=i.data,r(a.E.util.updateQueryData("othersList",void 0,(function(e){e.data.push(u.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),othersUpdate:e.mutation({query:function(e){var t=e.id,r=e.postBody;return{url:"others/othersUpdate/".concat(t),method:"PATCH",body:r}},onQueryStarted:function(e,t){return(0,s.Z)((0,n.Z)().mark((function r(){var s,i,u,o,c;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=e.id,e.postBody,i=t.dispatch,u=t.queryFulfilled,r.prev=2,r.next=5,u;case 5:o=r.sent,c=o.data,i(a.E.util.updateQueryData("othersList",void 0,(function(e){var t,r,n,a,i=e.data.findIndex((function(e){return e.id===s}));e.data[i].description=null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.description,e.data[i].status=null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.status,e.data[i].subject=null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.subject,e.data[i].studentID=null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.studentID}))),r.next=12;break;case 10:r.prev=10,r.t0=r.catch(2);case 12:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}),othersDelete:e.mutation({query:function(e){return{url:"others/othersDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,t){return(0,s.Z)((0,n.Z)().mark((function r(){var s,i,u;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=t.dispatch,i=t.queryFulfilled,u=s(a.E.util.updateQueryData("othersList",void 0,(function(t){t.data=t.data.filter((function(t){return t.id!==e}))}))),r.prev=2,r.next=5,i;case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),u.undo();case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()}})}}}),u=i.useOthersCreateMutation,o=i.useOthersListQuery,c=i.useOthersUpdateMutation,d=i.useOthersDeleteMutation},4291:function(e,t,r){r.r(t);var n=r(9439),s=r(2791),a=r(7689),i=r(7022),u=r(9140),o=r(9743),c=r(2677),d=r(5630),l=r(3360),h=r(4849),f=r(9230),p=r(1134),v=r(4695),x=r(8007),j=r(1724),Z=r(6378),m=r(184);t.default=function(){var e=(0,s.useState)(null),t=(0,n.Z)(e,2),r=t[0],b=t[1],y=(0,s.useState)({subject:"",description:""}),g=(0,n.Z)(y,2),E=g[0],w=g[1],C=(0,f.$G)().t,k=(0,a.s0)(),q=(0,Z.FE)().data,L=(0,Z.kX)(),S=(0,n.Z)(L,2),D=S[0],Q=S[1],I=Q.isLoading,B=Q.isSuccess,N=(0,Z.ds)(),T=(0,n.Z)(N,2),F=T[0],O=T[1],z=O.isLoading,G=O.isSuccess;(0,s.useEffect)((function(){var e,t=new URLSearchParams(window.location.search).get("id");(null!==t&&b(t),r&&q)&&w(null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.find((function(e){return e.id===r})))}),[r,q]);var U=(0,p.cI)({mode:"onChange",defaultValues:E,resolver:(0,v.X)(x.Ry({subject:x.Z_().required(C("subject is required")),description:x.Z_().required(C("description is required"))}))}),V=U.control,_=U.handleSubmit,M=U.reset,P=(U.watch,U.setValue,U.formState.errors);(0,s.useEffect)((function(){E&&M(E)}),[E]);return(0,s.useEffect)((function(){(B||G)&&k("/others")}),[B,G]),(0,m.jsx)(j.Z,{children:(0,m.jsx)(i.Z,{children:(0,m.jsx)(u.Z,{children:(0,m.jsx)(u.Z.Body,{children:(0,m.jsxs)(o.Z,{children:[(0,m.jsx)("h5",{children:C("".concat(r?"update others":"save others"))}),(0,m.jsx)("hr",{className:"bg-light"}),(0,m.jsx)(c.Z,{children:(0,m.jsxs)(d.Z,{onSubmit:_((function(e){var t={subject:e.subject,description:e.description};r?F({id:r,postBody:t}):D(t)})),onReset:M,children:[(0,m.jsxs)(o.Z,{class:!0,children:[(0,m.jsx)(c.Z,{sm:12,children:(0,m.jsxs)(d.Z.Group,{className:"mb-3",controlId:"subject",children:[(0,m.jsx)(d.Z.Label,{children:C("subject")}),(0,m.jsx)(p.Qr,{control:V,name:"subject",render:function(e){var t=e.field,r=t.onChange,n=(t.onBlur,t.value),s=t.ref;return(0,m.jsx)(d.Z.Control,{onChange:r,defaultValue:n,ref:s,isInvalid:P.subject,placeholder:C("subject of the others"),type:"text",size:"sm"})}}),P.subject&&(0,m.jsx)(d.Z.Text,{className:"text-danger",children:P.subject.message})]})}),(0,m.jsx)(c.Z,{sm:12,children:(0,m.jsxs)(d.Z.Group,{className:"mb-3",controlId:"description",children:[(0,m.jsx)(d.Z.Label,{children:C("description")}),(0,m.jsx)(p.Qr,{control:V,name:"description",render:function(e){var t=e.field,r=t.onChange,n=(t.onBlur,t.value),s=t.ref;return(0,m.jsx)(d.Z.Control,{onChange:r,defaultValue:n,ref:s,isInvalid:P.description,placeholder:C("description of the others"),type:"text",size:"sm",as:"textarea"})}}),P.description&&(0,m.jsx)(d.Z.Text,{className:"text-danger",children:P.description.message})]})})]}),(0,m.jsx)(o.Z,{children:(0,m.jsx)(c.Z,{sm:4,children:(0,m.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:I||z?(0,m.jsx)(h.Z,{size:"sm",color:"light"}):C("save change")})})})]})})]})})})})})}}}]);
//# sourceMappingURL=4291.fd3e7cb4.chunk.js.map