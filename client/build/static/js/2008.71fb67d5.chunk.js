"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[2008],{38:function(e,t,s){s.d(t,{Ek:function(){return l},VS:function(){return a},ir:function(){return c},tK:function(){return u}});var n=s(4165),r=s(5861),i=s(7218),o=i.E.injectEndpoints({endpoints:function(e){return{subjectRepetitionList:e.query({query:function(){return{url:"subjectRepetition/subjectRepetitionList",method:"GET"}}}),subjectRepetitionCreate:e.mutation({query:function(e){return{url:"subjectRepetition/subjectRepetitionCreate",method:"POST",body:e}},onQueryStarted:function(e,t){return(0,r.Z)((0,n.Z)().mark((function e(){var s,r,o,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.dispatch,r=t.queryFulfilled,e.prev=1,e.next=4,r;case 4:o=e.sent,a=o.data,s(i.E.util.updateQueryData("subjectRepetitionList",void 0,(function(e){e.data.push(a.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),subjectRepetitionUpdate:e.mutation({query:function(e){var t=e.id,s=e.postBody;return{url:"subjectRepetition/subjectRepetitionUpdate/".concat(t),method:"PATCH",body:s}},onQueryStarted:function(e,t){return(0,r.Z)((0,n.Z)().mark((function s(){var r,o,a,u,l,c;return(0,n.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=e.id,o=e.postBody,a=t.dispatch,u=t.queryFulfilled,s.prev=2,s.next=5,u;case 5:l=s.sent,c=l.data,a(i.E.util.updateQueryData("subjectRepetitionList",void 0,(function(e){var t,s=e.data.findIndex((function(e){return e.id===r}));e.data[s].rollNo=o.rollNo,e.data[s].session=o.session,e.data[s].sessionCGPA=o.sessionCGPA,e.data[s].sessionRegistration=o.sessionRegistration,e.data[s].status=null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.status,e.data[s].studentID=o.studentID,e.data[s].studentName=o.studentName,e.data[s].subject=o.subject}))),s.next=12;break;case 10:s.prev=10,s.t0=s.catch(2);case 12:case"end":return s.stop()}}),s,null,[[2,10]])})))()}}),subjectRepetitionDelete:e.mutation({query:function(e){return{url:"subjectRepetition/subjectRepetitionDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,t){return(0,r.Z)((0,n.Z)().mark((function s(){var r,o,a;return(0,n.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=t.dispatch,o=t.queryFulfilled,a=r(i.E.util.updateQueryData("subjectRepetitionList",void 0,(function(t){t.data=t.data.filter((function(t){return t.id!==e}))}))),s.prev=2,s.next=5,o;case 5:s.next=10;break;case 7:s.prev=7,s.t0=s.catch(2),a.undo();case 10:case"end":return s.stop()}}),s,null,[[2,7]])})))()}})}}}),a=o.useSubjectRepetitionCreateMutation,u=o.useSubjectRepetitionListQuery,l=o.useSubjectRepetitionUpdateMutation,c=o.useSubjectRepetitionDeleteMutation},2008:function(e,t,s){s.r(t);var n=s(9439),r=s(2791),i=s(7689),o=s(7022),a=s(9140),u=s(9743),l=s(2677),c=s(5630),d=s(3360),j=s(4849),f=s(9230),h=s(1134),p=s(4695),m=s(8007),x=s(1724),b=s(38),Z=s(184);t.default=function(){var e=(0,r.useState)(null),t=(0,n.Z)(e,2),s=t[0],v=t[1],g=(0,r.useState)({studentName:"",rollNo:"",session:"",sessionRegistration:"",sessionCGPA:"",subject:""}),C=(0,n.Z)(g,2),N=C[0],R=C[1],y=(0,f.$G)().t,G=(0,i.s0)(),q=(0,b.tK)().data,S=(0,b.VS)(),P=(0,n.Z)(S,2),I=P[0],L=P[1],A=L.isLoading,E=L.isSuccess,Q=(0,b.Ek)(),k=(0,n.Z)(Q,2),w=k[0],B=k[1],T=B.isLoading,V=B.isSuccess;(0,r.useEffect)((function(){var e,t=new URLSearchParams(window.location.search).get("id");(null!==t&&v(t),s&&q)&&R(null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.find((function(e){return e.id===s})))}),[s,q]);var D=(0,h.cI)({mode:"onChange",defaultValues:N,resolver:(0,p.X)(m.Ry({studentName:m.Z_().required(y("student name is required")),rollNo:m.Z_().required(y("roll no name is required")),session:m.Z_().required(y("session is required")),sessionRegistration:m.Z_().required(y("session registration is required")),sessionCGPA:m.Z_().required(y("session CGPA is required")),subject:m.Z_().required(y("subject is required"))}))}),z=D.control,_=D.handleSubmit,U=D.reset,F=(D.watch,D.setValue,D.formState.errors);(0,r.useEffect)((function(){N&&U(N)}),[N]);return(0,r.useEffect)((function(){(E||V)&&G("/subject-repetition")}),[E,V]),(0,Z.jsx)(x.Z,{children:(0,Z.jsx)(o.Z,{children:(0,Z.jsx)(a.Z,{children:(0,Z.jsx)(a.Z.Body,{children:(0,Z.jsxs)(u.Z,{children:[(0,Z.jsx)("h5",{children:y("".concat(s?"update subject repetition":"save subject repetition"))}),(0,Z.jsx)("hr",{className:"bg-light"}),(0,Z.jsx)(l.Z,{children:(0,Z.jsxs)(c.Z,{onSubmit:_((function(e){var t={studentName:e.studentName,rollNo:e.rollNo,session:e.session,sessionRegistration:e.sessionRegistration,sessionCGPA:e.sessionCGPA};s?w({id:s,postBody:t}):I(t)})),onReset:U,children:[(0,Z.jsxs)(u.Z,{class:!0,children:[(0,Z.jsx)(l.Z,{sm:4,children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",controlId:"studentName",children:[(0,Z.jsx)(c.Z.Label,{children:y("student name")}),(0,Z.jsx)(h.Qr,{control:z,name:"studentName",render:function(e){var t=e.field,s=t.onChange,n=(t.onBlur,t.value),r=t.ref;return(0,Z.jsx)(c.Z.Control,{onChange:s,defaultValue:n,ref:r,isInvalid:F.studentName,placeholder:y("student name of the subject repetition"),type:"text",size:"sm"})}}),F.studentName&&(0,Z.jsx)(c.Z.Text,{className:"text-danger",children:F.studentName.message})]})}),(0,Z.jsx)(l.Z,{sm:4,children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",controlId:"rollNo",children:[(0,Z.jsx)(c.Z.Label,{children:y("roll no")}),(0,Z.jsx)(h.Qr,{control:z,name:"rollNo",render:function(e){var t=e.field,s=t.onChange,n=(t.onBlur,t.value),r=t.ref;return(0,Z.jsx)(c.Z.Control,{onChange:s,defaultValue:n,ref:r,isInvalid:F.rollNo,placeholder:y("roll no of the subject repetition"),type:"text",size:"sm"})}}),F.rollNo&&(0,Z.jsx)(c.Z.Text,{className:"text-danger",children:F.rollNo.message})]})}),(0,Z.jsx)(l.Z,{sm:4,children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",controlId:"subject",children:[(0,Z.jsx)(c.Z.Label,{children:y("subject")}),(0,Z.jsx)(h.Qr,{control:z,name:"subject",render:function(e){var t=e.field,s=t.onChange,n=(t.onBlur,t.value),r=t.ref;return(0,Z.jsx)(c.Z.Control,{onChange:s,defaultValue:n,ref:r,isInvalid:F.subject,placeholder:y("subject of the subject repetition"),type:"text",size:"sm"})}}),F.subject&&(0,Z.jsx)(c.Z.Text,{className:"text-danger",children:F.subject.message})]})}),(0,Z.jsx)(l.Z,{sm:4,children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",controlId:"session",children:[(0,Z.jsx)(c.Z.Label,{children:y("session")}),(0,Z.jsx)(h.Qr,{control:z,name:"session",render:function(e){var t=e.field,s=t.onChange,n=(t.onBlur,t.value),r=t.ref;return(0,Z.jsx)(c.Z.Control,{onChange:s,defaultValue:n,ref:r,isInvalid:F.session,placeholder:y("session of the subject repetition"),type:"text",size:"sm"})}}),F.session&&(0,Z.jsx)(c.Z.Text,{className:"text-danger",children:F.session.message})]})}),(0,Z.jsx)(l.Z,{sm:4,children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",controlId:"sessionRegistration",children:[(0,Z.jsx)(c.Z.Label,{children:y("session registration")}),(0,Z.jsx)(h.Qr,{control:z,name:"sessionRegistration",render:function(e){var t=e.field,s=t.onChange,n=(t.onBlur,t.value),r=t.ref;return(0,Z.jsx)(c.Z.Control,{onChange:s,defaultValue:n,ref:r,isInvalid:F.sessionRegistration,placeholder:y("session registration of the subject repetition"),type:"text",size:"sm"})}}),F.sessionRegistration&&(0,Z.jsx)(c.Z.Text,{className:"text-danger",children:F.sessionRegistration.message})]})}),(0,Z.jsx)(l.Z,{sm:4,children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",controlId:"sessionCGPA",children:[(0,Z.jsx)(c.Z.Label,{children:y("session CGPA")}),(0,Z.jsx)(h.Qr,{control:z,name:"sessionCGPA",render:function(e){var t=e.field,s=t.onChange,n=(t.onBlur,t.value),r=t.ref;return(0,Z.jsx)(c.Z.Control,{onChange:s,defaultValue:n,ref:r,isInvalid:F.sessionCGPA,placeholder:y("session CGPA registration of the subject repetition"),type:"text",size:"sm"})}}),F.sessionCGPA&&(0,Z.jsx)(c.Z.Text,{className:"text-danger",children:F.sessionCGPA.message})]})})]}),(0,Z.jsx)(u.Z,{children:(0,Z.jsx)(l.Z,{sm:4,children:(0,Z.jsx)(d.Z,{size:"sm",className:"mt-2",type:"submit",children:A||T?(0,Z.jsx)(j.Z,{size:"sm",color:"light"}):y("save change")})})})]})})]})})})})})}}}]);
//# sourceMappingURL=2008.71fb67d5.chunk.js.map