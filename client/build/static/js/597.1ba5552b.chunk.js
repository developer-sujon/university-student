"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[597],{8318:function(e,r,n){n.d(r,{B$:function(){return i},b$:function(){return d},el:function(){return c},ry:function(){return u}});var t=n(4165),a=n(5861),s=n(7218),o=s.E.injectEndpoints({endpoints:function(e){return{instructorList:e.query({query:function(){return{url:"instructor/instructorList",method:"GET"}}}),instructorCreate:e.mutation({query:function(e){return{url:"instructor/instructorCreate",method:"POST",body:e}},onQueryStarted:function(e,r){return(0,a.Z)((0,t.Z)().mark((function e(){var n,a,o,i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.queryFulfilled,e.prev=1,e.next=4,a;case 4:o=e.sent,i=o.data,n(s.E.util.updateQueryData("instructorList",void 0,(function(e){e.data.push(i.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),instructorUpdate:e.mutation({query:function(e){var r=e.id,n=e.postBody;return{url:"instructor/instructorUpdate/".concat(r),method:"PATCH",body:n}},onQueryStarted:function(e,r){return(0,a.Z)((0,t.Z)().mark((function n(){var a,o,i,u,d;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.id,e.postBody,o=r.dispatch,i=r.queryFulfilled,n.prev=2,n.next=5,i;case 5:u=n.sent,d=u.data,o(s.E.util.updateQueryData("instructorList",void 0,(function(e){var r,n,t,s=e.data.findIndex((function(e){return e.id===a}));e.data[s].name=null===d||void 0===d||null===(r=d.data)||void 0===r?void 0:r.name,e.data[s].email=null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.email,e.data[s].password=null===d||void 0===d||null===(t=d.data)||void 0===t?void 0:t.password}))),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(2);case 12:case"end":return n.stop()}}),n,null,[[2,10]])})))()}}),instructorDelete:e.mutation({query:function(e){return{url:"instructor/instructorDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,r){return(0,a.Z)((0,t.Z)().mark((function n(){var a,o,i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.dispatch,o=r.queryFulfilled,i=a(s.E.util.updateQueryData("instructorList",void 0,(function(r){r.data=r.data.filter((function(r){return r.id!==e}))}))),n.prev=2,n.next=5,o;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),i.undo();case 10:case"end":return n.stop()}}),n,null,[[2,7]])})))()}})}}}),i=o.useInstructorCreateMutation,u=o.useInstructorListQuery,d=o.useInstructorUpdateMutation,c=o.useInstructorDeleteMutation},4597:function(e,r,n){n.r(r);var t=n(1413),a=n(9439),s=n(2791),o=n(7689),i=n(7022),u=n(9140),d=n(9743),c=n(2677),l=n(5630),m=n(3360),f=n(4849),p=n(9230),h=n(1134),x=n(4695),v=n(8007),Z=n(1724),w=n(8318),j=n(184);r.default=function(){var e=(0,s.useState)(null),r=(0,a.Z)(e,2),n=r[0],y=r[1],g=(0,s.useState)({name:"",email:"",password:""}),b=(0,a.Z)(g,2),C=b[0],q=b[1],I=(0,p.$G)().t,L=(0,o.s0)(),E=(0,w.ry)().data,S=(0,w.B$)(),Q=(0,a.Z)(S,2),k=Q[0],B=Q[1],N=B.isLoading,P=B.isSuccess,T=(0,w.b$)(),D=(0,a.Z)(T,2),G=D[0],_=D[1],$=_.isLoading,U=_.isSuccess;(0,s.useEffect)((function(){var e,r=new URLSearchParams(window.location.search).get("id");(null!==r&&y(r),n&&E)&&q(null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.find((function(e){return e.id===n})))}),[n,E]);var F=(0,h.cI)({mode:"onChange",defaultValues:C,resolver:(0,x.X)(v.Ry((0,t.Z)((0,t.Z)({name:v.Z_().required(I("name is required")),email:v.Z_().required(I("email number is required")).email(I("invalid email address"))},!n&&{password:v.Z_().required(I("password is required.")).min(8,I("password must be 8 digits long"))}),!n&&{confirmPassword:v.Z_().required(I("confirm password is required")).oneOf([v.iH("password"),null],I("password and confirm password must match"))})))}),M=F.control,R=F.handleSubmit,z=F.reset,H=(F.watch,F.setValue,F.formState.errors);(0,s.useEffect)((function(){C&&z(C)}),[C]);return(0,s.useEffect)((function(){(P||U)&&L("/instructor")}),[P,U]),(0,j.jsx)(Z.Z,{children:(0,j.jsx)(i.Z,{children:(0,j.jsx)(u.Z,{children:(0,j.jsx)(u.Z.Body,{children:(0,j.jsxs)(d.Z,{children:[(0,j.jsx)("h5",{children:I("".concat(n?"update instructor":"save instructor"))}),(0,j.jsx)("hr",{className:"bg-light"}),(0,j.jsx)(c.Z,{children:(0,j.jsxs)(l.Z,{onSubmit:R((function(e){var r={name:e.name,email:e.email,password:e.password};n?G({id:n,postBody:r}):k(r)})),onReset:z,children:[(0,j.jsxs)(d.Z,{class:!0,children:[(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:"name",children:[(0,j.jsx)(l.Z.Label,{children:I("name")}),(0,j.jsx)(h.Qr,{control:M,name:"name",render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value),a=r.ref;return(0,j.jsx)(l.Z.Control,{onChange:n,value:t,ref:a,isInvalid:H.name,placeholder:I("name"),type:"name"})}}),H.name&&(0,j.jsx)(l.Z.Text,{className:"text-danger",children:H.name.message})]})}),(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:"email",children:[(0,j.jsx)(l.Z.Label,{children:I("email")}),(0,j.jsx)(h.Qr,{control:M,name:"email",render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value),a=r.ref;return(0,j.jsx)(l.Z.Control,{onChange:n,value:t,ref:a,isInvalid:H.email,placeholder:I("email"),type:"email"})}}),H.email&&(0,j.jsx)(l.Z.Text,{className:"text-danger",children:H.email.message})]})}),!n&&(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:"Password",children:[(0,j.jsx)(l.Z.Label,{children:I("password")}),(0,j.jsx)(h.Qr,{control:M,name:"password",render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value),a=r.ref;return(0,j.jsx)(l.Z.Control,{onChange:n,value:t,ref:a,isInvalid:H.password,placeholder:I("password"),type:"password"})}}),H.password&&(0,j.jsx)(l.Z.Text,{className:"text-danger",children:H.password.message})]})}),!n&&(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(l.Z.Group,{className:"mb-3",controlId:"confirmPassword",children:[(0,j.jsx)(l.Z.Label,{children:I("confirm password")}),(0,j.jsx)(h.Qr,{control:M,name:"confirmPassword",render:function(e){var r=e.field,n=r.onChange,t=(r.onBlur,r.value),a=r.ref;return(0,j.jsx)(l.Z.Control,{onChange:n,value:t,ref:a,isInvalid:H.confirmPassword,placeholder:I("confirm password"),type:"password"})}}),H.confirmPassword&&(0,j.jsx)(l.Z.Text,{className:"text-danger",children:H.confirmPassword.message})]})})]}),(0,j.jsx)(d.Z,{children:(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsx)(m.Z,{size:"sm",className:"mt-2",type:"submit",children:N||$?(0,j.jsx)(f.Z,{size:"sm",color:"light"}):I("save change")})})})]})})]})})})})})}}}]);
//# sourceMappingURL=597.1ba5552b.chunk.js.map