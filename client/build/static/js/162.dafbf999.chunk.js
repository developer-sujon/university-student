"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[162],{8462:function(e,n,s){s.d(n,{Hq:function(){return u},T6:function(){return d},TX:function(){return o},Tn:function(){return c}});var t=s(4165),r=s(5861),i=s(7218),a=i.E.injectEndpoints({endpoints:function(e){return{sessionList:e.query({query:function(){return{url:"session/sessionList",method:"GET"}}}),sessionCreate:e.mutation({query:function(e){return{url:"session/sessionCreate",method:"POST",body:e}},onQueryStarted:function(e,n){return(0,r.Z)((0,t.Z)().mark((function e(){var s,r,a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.dispatch,r=n.queryFulfilled,e.prev=1,e.next=4,r;case 4:a=e.sent,o=a.data,s(i.E.util.updateQueryData("sessionList",void 0,(function(e){e.data.push(o.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),sessionUpdate:e.mutation({query:function(e){var n=e.id,s=e.postBody;return{url:"session/sessionUpdate/".concat(n),method:"PATCH",body:s}},onQueryStarted:function(e,n){return(0,r.Z)((0,t.Z)().mark((function s(){var r,a,o,u,c;return(0,t.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=e.id,e.postBody,a=n.dispatch,o=n.queryFulfilled,s.prev=2,s.next=5,o;case 5:u=s.sent,c=u.data,a(i.E.util.updateQueryData("sessionList",void 0,(function(e){var n,s=e.data.findIndex((function(e){return e.id===r}));e.data[s].sessionName=null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.sessionName}))),s.next=12;break;case 10:s.prev=10,s.t0=s.catch(2);case 12:case"end":return s.stop()}}),s,null,[[2,10]])})))()}}),sessionDelete:e.mutation({query:function(e){return{url:"session/sessionDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,n){return(0,r.Z)((0,t.Z)().mark((function s(){var r,a,o;return(0,t.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return r=n.dispatch,a=n.queryFulfilled,o=r(i.E.util.updateQueryData("sessionList",void 0,(function(n){n.data=n.data.filter((function(n){return n.id!==e}))}))),s.prev=2,s.next=5,a;case 5:s.next=10;break;case 7:s.prev=7,s.t0=s.catch(2),o.undo();case 10:case"end":return s.stop()}}),s,null,[[2,7]])})))()}})}}}),o=a.useSessionCreateMutation,u=a.useSessionListQuery,c=a.useSessionUpdateMutation,d=a.useSessionDeleteMutation},2162:function(e,n,s){s.r(n);var t=s(9439),r=s(2791),i=s(7689),a=s(7022),o=s(9140),u=s(9743),c=s(2677),d=s(5630),l=s(3360),f=s(4849),h=s(9230),m=s(1134),p=s(4695),v=s(8007),x=s(1724),Z=s(8462),j=(s(1239),s(184));n.default=function(){var e=(0,r.useState)(null),n=(0,t.Z)(e,2),s=n[0],y=n[1],g=(0,r.useState)({sessionName:""}),S=(0,t.Z)(g,2),N=S[0],b=S[1],w=(0,h.$G)().t,q=(0,i.s0)(),E=(0,Z.Hq)().data,L=(0,Z.TX)(),T=(0,t.Z)(L,2),k=T[0],C=T[1],D=C.isLoading,Q=C.isSuccess,M=(0,Z.Tn)(),B=(0,t.Z)(M,2),F=B[0],Y=B[1],I=Y.isLoading,P=Y.isSuccess;(0,r.useEffect)((function(){var e,n=new URLSearchParams(window.location.search).get("id");(null!==n&&y(n),s&&E)&&b(null===E||void 0===E||null===(e=E.data)||void 0===e?void 0:e.find((function(e){return e.id===s})))}),[s,E]);var U=(0,m.cI)({mode:"onChange",defaultValues:N,resolver:(0,p.X)(v.Ry({sessionName:v.Z_().required(w("session name is required"))}))}),z=U.control,G=U.handleSubmit,H=U.reset,R=(U.watch,U.setValue,U.formState.errors);(0,r.useEffect)((function(){N&&H(N)}),[N]);return(0,r.useEffect)((function(){(Q||P)&&q("/elective-courses")}),[Q,P]),(0,j.jsx)(x.Z,{children:(0,j.jsx)(a.Z,{children:(0,j.jsx)(o.Z,{children:(0,j.jsx)(o.Z.Body,{children:(0,j.jsxs)(u.Z,{children:[(0,j.jsx)("h5",{children:w("".concat(s?"update Session":"save Session"))}),(0,j.jsx)("hr",{className:"bg-light"}),(0,j.jsx)(c.Z,{children:(0,j.jsxs)(d.Z,{onSubmit:G((function(e){var n={sessionName:e.sessionName};s?F({id:s,postBody:n}):k(n)})),onReset:H,children:[(0,j.jsx)(u.Z,{class:!0,children:(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(d.Z.Group,{className:"mb-3",controlId:"sessionName",children:[(0,j.jsx)(d.Z.Label,{children:w("session name")}),(0,j.jsx)(m.Qr,{control:z,name:"sessionName",render:function(e){var n=e.field,s=n.onChange,t=(n.onBlur,n.value),r=n.ref;return(0,j.jsx)(d.Z.Control,{onChange:s,defaultValue:t,ref:r,isInvalid:R.sessionName,placeholder:w("session name of the session"),type:"text",size:"sm"})}}),R.sessionName&&(0,j.jsx)(d.Z.Text,{className:"text-danger",children:R.sessionName.message})]})})}),(0,j.jsx)(u.Z,{children:(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:D||I?(0,j.jsx)(f.Z,{size:"sm",color:"light"}):w("save change")})})})]})})]})})})})})}},1239:function(e,n,s){s.d(n,{p6:function(){return a}});s(2791);var t=s(6431),r=s.n(t),i=s(184);function a(e){var n=new Date(e),s=""+(n.getMonth()+1),t=""+n.getDate(),r=n.getFullYear();return s.length<2&&(s="0"+s),t.length<2&&(t="0"+t),[r,s,t].join("-")}n.ZP=function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{format:"D MMM YYYY",withTitle:!0,children:e})," ",(0,i.jsx)("br",{})]})}}}]);
//# sourceMappingURL=162.dafbf999.chunk.js.map