"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[688],{916:function(e,t,n){n.d(t,{op:function(){return l},sW:function(){return u},tb:function(){return c},wS:function(){return o}});var a=n(4165),r=n(5861),s=n(7218),i=s.E.injectEndpoints({endpoints:function(e){return{leaveList:e.query({query:function(){return{url:"leave/leaveList",method:"GET"}}}),leaveCreate:e.mutation({query:function(e){return{url:"leave/leaveCreate",method:"POST",body:e}},onQueryStarted:function(e,t){return(0,r.Z)((0,a.Z)().mark((function e(){var n,r,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dispatch,r=t.queryFulfilled,e.prev=1,e.next=4,r;case 4:i=e.sent,l=i.data,n(s.E.util.updateQueryData("leaveList",void 0,(function(e){e.data.push(l.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),leaveUpdate:e.mutation({query:function(e){var t=e.id,n=e.postBody;return{url:"leave/leaveUpdate/".concat(t),method:"PATCH",body:n}},onQueryStarted:function(e,t){return(0,r.Z)((0,a.Z)().mark((function n(){var r,i,l,o,c;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,i=e.postBody,l=t.dispatch,o=t.queryFulfilled,c=l(s.E.util.updateQueryData("leaveList",void 0,(function(e){var t=e.data.findIndex((function(e){return e.id===r}));e.data[t].title=i.title,e.data[t].status=i.status,e.data[t].dueDate=i.dueDate,e.data[t].descriptions=i.descriptions}))),n.prev=3,n.next=6,o;case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(3),c.undo();case 11:case"end":return n.stop()}}),n,null,[[3,8]])})))()}}),leaveDelete:e.mutation({query:function(e){return{url:"leave/leaveDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,t){return(0,r.Z)((0,a.Z)().mark((function n(){var r,i,l;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.dispatch,i=t.queryFulfilled,l=r(s.E.util.updateQueryData("leaveList",void 0,(function(t){t.data=t.data.filter((function(t){return t.id!==e}))}))),n.prev=2,n.next=5,i;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),l.undo();case 10:case"end":return n.stop()}}),n,null,[[2,7]])})))()}})}}}),l=i.useLeaveCreateMutation,o=i.useLeaveListQuery,c=i.useLeaveUpdateMutation,u=i.useLeaveDeleteMutation},3026:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var a=n(9439),r=n(2791),s=n(5736),i=n(7798),l=n(2576),o=n(3360),c=n(7022),u=n(9140),d=n(9743),p=n(2677),h=n(4849),x=n(9230),f=n(8820),v=n(1087),m=n(9126),g=n(9826),j=n(916),b=n(3433),Z=n(1413),y=n(5987),C=n(1358),k=n(1694),N=n.n(k),w=n(6053),P=n(184),S=function(e){var t=e.tableProps,n=e.sizePerPageList,s=e.link,i=(0,r.useState)(t.pageCount),l=(0,a.Z)(i,2),o=l[0],c=l[1],u=(0,r.useState)(t.state.pageIndex),d=(0,a.Z)(u,2),p=d[0],h=d[1];(0,r.useEffect)((function(){c(t.pageCount),h(t.state.pageIndex)}),[t.pageCount,t.state.pageIndex]);var x=(0,r.useCallback)((function(e,t){return e.filter((function(e){return e<=o}))}),[o]),f=(0,r.useCallback)((function(e,t){return t<7?x([1,2,3,4,5,6],t):e%5>=0&&e>4&&e+2<t?[1,e-1,e,e+1,t]:e%5>=0&&e>4&&e+2>=t?[1,t-3,t-2,t-1,t]:[1,2,3,4,5,t]}),[x]),m=function(e){if(e!==p+1){var n=f(e,o);Z(x(n,o)),t.gotoPage(e-1)}};(0,r.useEffect)((function(){var e=f(0,o);Z(e)}),[o,f]);var g=(0,r.useState)(f(0,o)),j=(0,a.Z)(g,2),b=j[0],Z=j[1],y=p+1;return(0,P.jsxs)("div",{className:"d-lg-flex align-items-center text-center pb-1",children:[n.length>0&&(0,P.jsxs)("div",{className:"d-inline-block me-3",children:[(0,P.jsx)("label",{className:"me-1",children:"Display :"}),(0,P.jsx)("select",{value:t.state.pageSize,onChange:function(e){t.setPageSize(Number(e.target.value))},className:"form-select d-inline-block w-auto",children:(n||[]).map((function(e,t){return(0,P.jsx)("option",{value:e.value,children:e.text},t)}))})]}),(0,P.jsxs)("span",{className:"me-3",children:["Page"," ",(0,P.jsxs)("strong",{children:[p+1," of ",t.pageOptions.length]})," "]}),(0,P.jsxs)("span",{className:"d-inline-block align-items-center text-sm-start text-center my-sm-0 my-2",children:[(0,P.jsx)("label",{children:"Go to page : "}),(0,P.jsx)("input",{type:"number",value:p+1,min:"1",onChange:function(e){var n=e.target.value?Number(e.target.value)-1:0;t.gotoPage(n),h(t.state.pageIndex)},className:"form-control w-25 ms-1 d-inline-block"})]}),(0,P.jsxs)("ul",{className:"pagination pagination-rounded d-inline-flex ms-auto align-item-center mb-0",children:[(0,P.jsx)("li",{className:N()("page-item","paginate_button","previous",{disabled:1===y}),onClick:function(){1!==y&&m(y-1)},children:(0,P.jsx)(v.rU,{to:s,className:"page-link",children:(0,P.jsx)(w.Ugn,{})})},"prevpage"),(b||[]).map((function(e,t,n){return n[t-1]+1<e?(0,P.jsxs)(r.Fragment,{children:[(0,P.jsx)("li",{className:"page-item disabled d-none d-xl-inline-block",children:(0,P.jsx)(v.rU,{to:s,className:"page-link",children:"..."})}),(0,P.jsx)("li",{className:N()("page-item","d-none","d-xl-inline-block",{active:y===e}),onClick:function(t){return m(e)},children:(0,P.jsx)(v.rU,{to:s,className:"page-link",children:e})})]},e):(0,P.jsx)("li",{className:N()("page-item","d-none","d-xl-inline-block",{active:y===e}),onClick:function(t){return m(e)},children:(0,P.jsx)(v.rU,{to:s,className:"page-link",children:e})},e)})),(0,P.jsx)("li",{className:N()("page-item","paginate_button","next",{disabled:y===t.pageCount}),onClick:function(){y!==t.pageCount&&m(y+1)},children:(0,P.jsx)(v.rU,{to:s,className:"page-link",children:(0,P.jsx)(w.ULj,{})})},"nextpage")]})]})},E=["indeterminate"],D=function(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,s=e.setGlobalFilter,i=e.searchBoxClass,l=t.length,o=r.useState(n),c=(0,a.Z)(o,2),u=c[0],d=c[1],p=(0,C.useAsyncDebounce)((function(e){s(e||void 0)}),200);return(0,P.jsx)("div",{className:N()(i),children:(0,P.jsxs)("span",{className:"d-flex align-items-center",children:["Search :"," ",(0,P.jsx)("input",{value:u||"",onChange:function(e){d(e.target.value),p(e.target.value)},placeholder:"".concat(l," records..."),className:"form-control w-auto ms-1"})]})})},L=(0,r.forwardRef)((function(e,t){var n=e.indeterminate,a=(0,y.Z)(e,E),s=(0,r.useRef)(),i=t||s;return(0,r.useEffect)((function(){i.current.indeterminate=n}),[i,n]),(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)("div",{className:"form-check",children:[(0,P.jsx)("input",(0,Z.Z)({type:"checkbox",className:"form-check-input",ref:i},a)),(0,P.jsx)("label",{htmlFor:"form-check-input",className:"form-check-label"})]})})})),F=function(e){var t=e.isSearchable||!1,n=e.isSortable||!1,a=e.pagination||!1,r=e.isSelectable||!1,s=e.isExpandable||!1,i=(0,C.useTable)({columns:e.columns,data:e.data,initialState:{pageSize:e.pageSize||10}},t&&C.useGlobalFilter,n&&C.useSortBy,s&&C.useExpanded,a&&C.usePagination,r&&C.useRowSelect,(function(e){r&&e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return(0,P.jsx)("div",{children:(0,P.jsx)(L,(0,Z.Z)({},t()))})},Cell:function(e){var t=e.row;return(0,P.jsx)("div",{children:(0,P.jsx)(L,(0,Z.Z)({},t.getToggleRowSelectedProps()))})}}].concat((0,b.Z)(e))})),s&&e.visibleColumns.push((function(e){return[{id:"expander",Header:function(e){var t=e.getToggleAllRowsExpandedProps,n=e.isAllRowsExpanded;return(0,P.jsx)("span",(0,Z.Z)((0,Z.Z)({},t()),{},{children:n?"-":"+"}))},Cell:function(e){var t=e.row;return t.canExpand?(0,P.jsx)("span",(0,Z.Z)((0,Z.Z)({},t.getToggleRowExpandedProps({style:{paddingLeft:"".concat(2*t.depth,"rem")}})),{},{children:t.isExpanded?"-":"+"})):null}}].concat((0,b.Z)(e))}))})),l=a?i.page:i.rows;return(0,P.jsxs)(P.Fragment,{children:[t&&(0,P.jsx)(D,{preGlobalFilteredRows:i.preGlobalFilteredRows,globalFilter:i.state.globalFilter,setGlobalFilter:i.setGlobalFilter,searchBoxClass:e.searchBoxClass}),(0,P.jsx)("div",{className:"table-responsive",children:(0,P.jsxs)("table",(0,Z.Z)((0,Z.Z)({},i.getTableProps()),{},{className:N()("table table-centered react-table",e.tableClass),children:[(0,P.jsx)("thead",{className:e.theadClass,children:i.headerGroups.map((function(e){return(0,P.jsx)("tr",(0,Z.Z)((0,Z.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,P.jsx)("th",(0,Z.Z)((0,Z.Z)({},e.getHeaderProps(e.sort&&e.getSortByToggleProps())),{},{className:N()({sorting_desc:!0===e.isSortedDesc,sorting_asc:!1===e.isSortedDesc,sortable:!0===e.sort}),children:e.render("Header")}))}))}))}))}),(0,P.jsx)("tbody",(0,Z.Z)((0,Z.Z)({},i.getTableBodyProps()),{},{children:(l||[]).map((function(e,t){return i.prepareRow(e),(0,P.jsx)("tr",(0,Z.Z)((0,Z.Z)({},e.getRowProps()),{},{children:e.cells.map((function(e){return(0,P.jsx)("td",(0,Z.Z)((0,Z.Z)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))}),a&&(0,P.jsx)(S,{link:e.link,tableProps:i,sizePerPageList:e.sizePerPageList})]})},T=n(5671),B=n(3144),H=n(1830),R=n.n(H),U=n(3682),G=function(){function e(){(0,T.Z)(this,e)}return(0,B.Z)(e,null,[{key:"Delete",value:function(e,t){return R().fire({title:U.Z.t("Are you sure?"),text:U.Z.t("You won't be able to revert this!"),icon:U.Z.t("warning"),showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:U.Z.t("Cancel")}).then((function(n){if(n.isConfirmed)return t(e).then((function(e){if(e)return!0}))}))}},{key:"Update",value:function(e,t,n,a){return R().fire({title:"Change Status",input:"select",inputOptions:n,inputValue:t}).then((function(t){if(t.isConfirmed)return a(e,t.value).then((function(e){return e}))}))}},{key:"CourseUpdate",value:function(e,t,n,a){return R().fire({title:"Change Status",input:"select",inputOptions:t,inputValue:n.status}).then((function(t){if(t.isConfirmed)return a(e,(0,Z.Z)((0,Z.Z)({},n),{},{status:t.value})).then((function(e){return e}))}))}}]),e}(),z=n(1239),q=n(5316),A=function(e){var t=e.show,n=e.handleClose,a=e.singleLeave,r=(0,x.$G)().t;return(0,P.jsxs)(q.Z,{show:t,onHide:n,children:[(0,P.jsx)(q.Z.Header,{closeButton:!0,children:(0,P.jsxs)(q.Z.Title,{children:[r("subject"),": ",a.subject]})}),(0,P.jsxs)(q.Z.Body,{children:[r("reason"),": ",a.reason," "]}),(0,P.jsx)(q.Z.Footer,{children:(0,P.jsx)(o.Z,{variant:"primary",onClick:n,children:r("close")})})]})},M=function(){var e=(0,r.useState)({}),t=(0,a.Z)(e,2),n=t[0],b=t[1],Z=(0,r.useState)(!1),y=(0,a.Z)(Z,2),C=y[0],k=y[1],N=(0,x.$G)().t,w=(0,j.wS)(),S=w.data,E=w.isLoading,D=(0,j.sW)(),L=(0,a.Z)(D,1)[0],T=(null===S||void 0===S?void 0:S.data)||[],B=[{Header:"#",accessor:function(e,t){return t+1},sort:!0},{Header:N("subject"),accessor:function(e){return(0,P.jsxs)("span",{className:"ms-1",children:[" ",e.subject]})},sort:!0},{Header:N("status"),accessor:function(e){return(0,P.jsx)("div",{className:"bodySmall",children:"PENDING"===(null===e||void 0===e?void 0:e.status)?(0,P.jsx)(s.Z,{bg:"primary",pill:!0,children:(0,P.jsx)("span",{className:"ms-1",children:N(null===e||void 0===e?void 0:e.status)})}):"REJECTED"===(null===e||void 0===e?void 0:e.status)?(0,P.jsx)(s.Z,{bg:"danger",pill:!0,children:(0,P.jsx)("span",{className:"ms-1",children:N(null===e||void 0===e?void 0:e.status)})}):"APPROVED"===(null===e||void 0===e?void 0:e.status)?(0,P.jsx)(s.Z,{bg:"success",pill:!0,children:(0,P.jsx)("span",{className:"ms-1",children:N(null===e||void 0===e?void 0:e.status)})}):""})},sort:!0},{Header:N("start date"),accessor:function(e){return(0,z.ZP)(null===e||void 0===e?void 0:e.startDate)},sort:!0},{Header:N("end date"),accessor:function(e){return(0,z.ZP)(null===e||void 0===e?void 0:e.endDate)},sort:!0},{Header:N("duration"),accessor:function(e){return(0,P.jsxs)("span",{className:"ms-1",children:[" ",e.duration]})},sort:!0},{Header:N("action"),accessor:function(e){return(0,P.jsxs)("div",{className:"bodySmall",children:[(0,P.jsx)(i.Z,{placement:"top",delay:{show:250,hide:400},overlay:(0,P.jsx)(l.Z,{id:"button-tooltip",children:N("view")}),children:(0,P.jsx)(o.Z,{variant:"primary",style:{padding:"5px 10px"},className:"me-1",onClick:function(){return function(e){k(!0),b(e)}(e)},children:(0,P.jsx)(f.$aU,{})})}),(0,P.jsx)(i.Z,{placement:"top",delay:{show:250,hide:400},overlay:(0,P.jsx)(l.Z,{id:"button-tooltip",children:N("edit")}),children:(0,P.jsx)(v.rU,{to:"/Leave-create-update?id=".concat(null===e||void 0===e?void 0:e.id),children:(0,P.jsx)(o.Z,{variant:"primary",style:{padding:"5px 10px"},className:"me-1",children:(0,P.jsx)(f.$iz,{})})})}),(0,P.jsx)(i.Z,{placement:"top",delay:{show:250,hide:400},overlay:(0,P.jsx)(l.Z,{id:"button-tooltip",children:N("delete")}),children:(0,P.jsx)(o.Z,{variant:"danger",style:{padding:"5px 10px"},onClick:function(){return t=e.id,void G.Delete(t,L);var t},children:(0,P.jsx)(m.yvY,{})})})]})}}],H=[{text:N("5"),value:5},{text:N("10"),value:10},{text:N("25"),value:25},{text:N("all"),value:null===T||void 0===T?void 0:T.length}];return(0,P.jsx)(g.Z,{children:(0,P.jsxs)(c.Z,{children:[(0,P.jsx)(u.Z,{children:(0,P.jsx)(u.Z.Body,{children:(0,P.jsxs)(d.Z,{children:[(0,P.jsxs)(p.Z,{className:"d-flex justify-content-between p-2",sm:12,children:[(0,P.jsx)("h5",{children:N("leave")}),(0,P.jsx)(v.rU,{to:"/leave-create-update",children:(0,P.jsx)(o.Z,{size:"sm",variant:"primary",children:N("create leave")})})]}),(0,P.jsx)(p.Z,{sm:12,children:E?(0,P.jsx)(h.Z,{size:"lg",variant:"primary"}):null!==T&&void 0!==T&&T.length?(0,P.jsx)(F,{columns:B,data:T,pageSize:5,sizePerPageList:H,isSortable:!0,pagination:!0}):N("no data found")})]})})}),(0,P.jsx)(A,{show:C,handleClose:function(){k(!1),b({})},singleLeave:n})]})})}},1239:function(e,t,n){n.d(t,{p6:function(){return i}});n(2791);var a=n(6431),r=n.n(a),s=n(184);function i(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}t.ZP=function(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r(),{format:"D MMM YYYY",withTitle:!0,children:e})," ",(0,s.jsx)("br",{})]})}}}]);
//# sourceMappingURL=688.eced8a9e.chunk.js.map