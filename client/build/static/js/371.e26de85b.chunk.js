"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[371],{9935:function(e,s,r){r.d(s,{S5:function(){return d},j0:function(){return u},zM:function(){return c},zT:function(){return i}});var t=r(4165),n=r(5861),a=r(7218),o=a.E.injectEndpoints({endpoints:function(e){return{coursesList:e.query({query:function(){return{url:"courses/coursesList",method:"GET"}}}),coursesCreate:e.mutation({query:function(e){return{url:"courses/coursesCreate",method:"POST",body:e}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function e(){var r,n,o,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.dispatch,n=s.queryFulfilled,e.prev=1,e.next=4,n;case 4:o=e.sent,u=o.data,r(a.E.util.updateQueryData("coursesList",void 0,(function(e){e.data.push(u.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),coursesUpdate:e.mutation({query:function(e){var s=e.id,r=e.postBody;return{url:"courses/coursesUpdate/".concat(s),method:"PATCH",body:r}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,o,u,i,c;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.id,e.postBody,o=s.dispatch,u=s.queryFulfilled,r.prev=2,r.next=5,u;case 5:i=r.sent,c=i.data,o(a.E.util.updateQueryData("coursesList",void 0,(function(e){var s,r,t,a,o,u=e.data.findIndex((function(e){return e.id===n}));e.data[u].coursesCode=null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.coursesCode,e.data[u].coursesName=null===c||void 0===c||null===(r=c.data)||void 0===r?void 0:r.coursesName,e.data[u].coursesInstructor=null===c||void 0===c||null===(t=c.data)||void 0===t?void 0:t.coursesInstructor,e.data[u].seatsLimit=null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.seatsLimit,e.data[u].registrationDeadline=null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.registrationDeadline}))),r.next=12;break;case 10:r.prev=10,r.t0=r.catch(2);case 12:case"end":return r.stop()}}),r,null,[[2,10]])})))()}}),coursesDelete:e.mutation({query:function(e){return{url:"courses/coursesDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,s){return(0,n.Z)((0,t.Z)().mark((function r(){var n,o,u;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=s.dispatch,o=s.queryFulfilled,u=n(a.E.util.updateQueryData("coursesList",void 0,(function(s){s.data=s.data.filter((function(s){return s.id!==e}))}))),r.prev=2,r.next=5,o;case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),u.undo();case 10:case"end":return r.stop()}}),r,null,[[2,7]])})))()}})}}}),u=o.useCoursesCreateMutation,i=o.useCoursesListQuery,c=o.useCoursesUpdateMutation,d=o.useCoursesDeleteMutation},4371:function(e,s,r){r.r(s);var t=r(9439),n=r(2791),a=r(7689),o=r(7022),u=r(9140),i=r(9743),c=r(2677),d=r(5630),l=r(3360),m=r(4849),f=r(9230),h=r(1134),x=r(4695),v=r(8007),p=r(1724),Z=r(9935),j=r(1239),g=r(184);s.default=function(){var e=(0,n.useState)(null),s=(0,t.Z)(e,2),r=s[0],C=s[1],y=(0,n.useState)({coursesCode:"",coursesName:"",coursesInstructor:"",seatsLimit:0,registrationDeadline:(0,j.p6)(new Date)}),L=(0,t.Z)(y,2),b=L[0],I=L[1],N=(0,f.$G)().t,D=(0,a.s0)(),q=(0,Z.zT)().data,w=(0,Z.j0)(),S=(0,t.Z)(w,2),T=S[0],E=S[1],Q=E.isLoading,z=E.isSuccess,k=(0,Z.zM)(),B=(0,t.Z)(k,2),M=B[0],G=B[1],V=G.isLoading,F=G.isSuccess;(0,n.useEffect)((function(){var e,s=new URLSearchParams(window.location.search).get("id");(null!==s&&C(s),r&&q)&&I(null===q||void 0===q||null===(e=q.data)||void 0===e?void 0:e.find((function(e){return e.id===r})))}),[r,q]);var Y=(0,h.cI)({mode:"onChange",defaultValues:b,resolver:(0,x.X)(v.Ry({coursesCode:v.Z_().required(N("courses name is required")),coursesName:v.Z_().required(N("courses name is required")),coursesInstructor:v.Z_().required(N("courses instructor is required")),seatsLimit:v.Rx(N("seats limit is required")).required(N("seats limit is required")).min(1,"seats limit must be greater than or equal to 1"),registrationDeadline:v.hT().required(N("courses registration deadline is required"))}))}),_=Y.control,P=Y.handleSubmit,R=Y.reset,U=(Y.watch,Y.setValue,Y.formState.errors);(0,n.useEffect)((function(){b&&R(b)}),[b]);return(0,n.useEffect)((function(){(z||F)&&D("/elective-courses")}),[z,F]),(0,g.jsx)(p.Z,{children:(0,g.jsx)(o.Z,{children:(0,g.jsx)(u.Z,{children:(0,g.jsx)(u.Z.Body,{children:(0,g.jsxs)(i.Z,{children:[(0,g.jsx)("h5",{children:N("".concat(r?"update courses":"save courses"))}),(0,g.jsx)("hr",{className:"bg-light"}),(0,g.jsx)(c.Z,{children:(0,g.jsxs)(d.Z,{onSubmit:P((function(e){var s={coursesCode:e.coursesCode,coursesName:e.coursesName,coursesInstructor:e.coursesInstructor,seatsLimit:e.seatsLimit,registrationDeadline:e.registrationDeadline};r?M({id:r,postBody:s}):T(s)})),onReset:R,children:[(0,g.jsxs)(i.Z,{class:!0,children:[(0,g.jsx)(c.Z,{sm:4,children:(0,g.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesCode",children:[(0,g.jsx)(d.Z.Label,{children:N("courses code")}),(0,g.jsx)(h.Qr,{control:_,name:"coursesCode",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,g.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:U.coursesCode,placeholder:N("courses code of the courses"),type:"text",size:"sm"})}}),U.coursesCode&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:U.coursesCode.message})]})}),(0,g.jsx)(c.Z,{sm:4,children:(0,g.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesName",children:[(0,g.jsx)(d.Z.Label,{children:N("courses name")}),(0,g.jsx)(h.Qr,{control:_,name:"coursesName",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,g.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:U.coursesName,placeholder:N("courses name of the courses"),type:"text",size:"sm"})}}),U.coursesName&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:U.coursesName.message})]})}),(0,g.jsx)(c.Z,{sm:4,children:(0,g.jsxs)(d.Z.Group,{className:"mb-3",controlId:"coursesInstructor",children:[(0,g.jsx)(d.Z.Label,{children:N("courses instructor")}),(0,g.jsx)(h.Qr,{control:_,name:"coursesInstructor",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,g.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:U.coursesInstructor,placeholder:N("courses instructor of the courses"),type:"text",size:"sm"})}}),U.coursesInstructor&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:U.coursesInstructor.message})]})}),(0,g.jsx)(c.Z,{sm:4,children:(0,g.jsxs)(d.Z.Group,{className:"mb-3",controlId:"seatsLimit",children:[(0,g.jsx)(d.Z.Label,{children:N("seats limit")}),(0,g.jsx)(h.Qr,{control:_,name:"seatsLimit",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,g.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:U.seatsLimit,placeholder:N("seats limit of the courses"),type:"number",size:"sm"})}}),U.seatsLimit&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:U.seatsLimit.message})]})}),(0,g.jsx)(c.Z,{sm:4,children:(0,g.jsxs)(d.Z.Group,{className:"mb-3",controlId:"registrationDeadline",children:[(0,g.jsx)(d.Z.Label,{children:N("registration deadline")}),(0,g.jsx)(h.Qr,{control:_,name:"registrationDeadline",render:function(e){var s=e.field,r=s.onChange,t=(s.onBlur,s.value),n=s.ref;return(0,g.jsx)(d.Z.Control,{onChange:r,defaultValue:t,ref:n,isInvalid:U.registrationDeadline,type:"date",size:"sm"})}}),U.registrationDeadline&&(0,g.jsx)(d.Z.Text,{className:"text-danger",children:U.registrationDeadline.message})]})})]}),(0,g.jsx)(i.Z,{children:(0,g.jsx)(c.Z,{sm:4,children:(0,g.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:Q||V?(0,g.jsx)(m.Z,{size:"sm",color:"light"}):N("save change")})})})]})})]})})})})})}},1239:function(e,s,r){r.d(s,{p6:function(){return o}});r(2791);var t=r(6431),n=r.n(t),a=r(184);function o(e){var s=new Date(e),r=""+(s.getMonth()+1),t=""+s.getDate(),n=s.getFullYear();return r.length<2&&(r="0"+r),t.length<2&&(t="0"+t),[n,r,t].join("-")}s.ZP=function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{format:"D MMM YYYY",withTitle:!0,children:e})," ",(0,a.jsx)("br",{})]})}}}]);
//# sourceMappingURL=371.e26de85b.chunk.js.map