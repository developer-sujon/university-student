"use strict";(self.webpackChunkfresh_app=self.webpackChunkfresh_app||[]).push([[2162],{8462:function(e,s,n){n.d(s,{Hq:function(){return u},T6:function(){return d},TX:function(){return o},Tn:function(){return c},uM:function(){return l}});var t=n(4165),r=n(5861),i=n(7218),a=i.E.injectEndpoints({endpoints:function(e){return{sessionList:e.query({query:function(){return{url:"session/sessionList",method:"GET"}}}),sessionDropDown:e.query({query:function(){return{url:"session/sessionDropDown",method:"GET"}}}),sessionCreate:e.mutation({query:function(e){return{url:"session/sessionCreate",method:"POST",body:e}},onQueryStarted:function(e,s){return(0,r.Z)((0,t.Z)().mark((function e(){var n,r,a,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.dispatch,r=s.queryFulfilled,e.prev=1,e.next=4,r;case 4:a=e.sent,o=a.data,n(i.E.util.updateQueryData("sessionList",void 0,(function(e){e.data.push(o.data)}))),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,9]])})))()}}),sessionUpdate:e.mutation({query:function(e){var s=e.id,n=e.postBody;return{url:"session/sessionUpdate/".concat(s),method:"PATCH",body:n}},onQueryStarted:function(e,s){return(0,r.Z)((0,t.Z)().mark((function n(){var r,a,o,u,c;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.id,e.postBody,a=s.dispatch,o=s.queryFulfilled,n.prev=2,n.next=5,o;case 5:u=n.sent,c=u.data,a(i.E.util.updateQueryData("sessionList",void 0,(function(e){var s,n,t=e.data.findIndex((function(e){return e.id===r}));e.data[t].sessionName=null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.sessionName,e.data[t].sessionYear=null===c||void 0===c||null===(n=c.data)||void 0===n?void 0:n.sessionYear}))),n.next=12;break;case 10:n.prev=10,n.t0=n.catch(2);case 12:case"end":return n.stop()}}),n,null,[[2,10]])})))()}}),sessionDelete:e.mutation({query:function(e){return{url:"session/sessionDelete/".concat(e),method:"DELETE"}},onQueryStarted:function(e,s){return(0,r.Z)((0,t.Z)().mark((function n(){var r,a,o;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=s.dispatch,a=s.queryFulfilled,o=r(i.E.util.updateQueryData("sessionList",void 0,(function(s){s.data=s.data.filter((function(s){return s.id!==e}))}))),n.prev=2,n.next=5,a;case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),o.undo();case 10:case"end":return n.stop()}}),n,null,[[2,7]])})))()}})}}}),o=a.useSessionCreateMutation,u=a.useSessionListQuery,c=a.useSessionUpdateMutation,d=a.useSessionDeleteMutation,l=a.useSessionDropDownQuery},2162:function(e,s,n){n.r(s);var t=n(9439),r=n(2791),i=n(7689),a=n(7022),o=n(9140),u=n(9743),c=n(2677),d=n(5630),l=n(3360),f=n(4849),h=n(9230),m=n(1134),p=n(4695),x=n(8007),v=n(1724),Z=n(8462),j=(n(1239),n(184));s.default=function(){var e=(0,r.useState)(null),s=(0,t.Z)(e,2),n=s[0],y=s[1],g=(0,r.useState)({sessionName:"",sessionYear:""}),w=(0,t.Z)(g,2),N=w[0],S=w[1],b=(0,h.$G)().t,q=(0,i.s0)(),D=(0,Z.Hq)().data,Y=(0,Z.TX)(),C=(0,t.Z)(Y,2),E=C[0],T=C[1],L=T.isLoading,k=T.isSuccess,Q=(0,Z.Tn)(),M=(0,t.Z)(Q,2),B=M[0],I=M[1],F=I.isLoading,G=I.isSuccess;(0,r.useEffect)((function(){var e,s=new URLSearchParams(window.location.search).get("id");(null!==s&&y(s),n&&D)&&S(null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.find((function(e){return e.id===n})))}),[n,D]);var z=(0,m.cI)({mode:"onChange",defaultValues:N,resolver:(0,p.X)(x.Ry({sessionName:x.Z_().required(b("session name is required")),sessionYear:x.Z_().required(b("session year is required"))}))}),P=z.control,U=z.handleSubmit,V=z.reset,_=(z.watch,z.setValue,z.formState.errors);(0,r.useEffect)((function(){N&&V(N)}),[N]);return(0,r.useEffect)((function(){(k||G)&&q("/elective-courses")}),[k,G]),(0,j.jsx)(v.Z,{children:(0,j.jsx)(a.Z,{children:(0,j.jsx)(o.Z,{children:(0,j.jsx)(o.Z.Body,{children:(0,j.jsxs)(u.Z,{children:[(0,j.jsx)("h5",{children:b("".concat(n?"update session":"save session"))}),(0,j.jsx)("hr",{className:"bg-light"}),(0,j.jsx)(c.Z,{children:(0,j.jsxs)(d.Z,{onSubmit:U((function(e){var s={sessionName:e.sessionName,sessionYear:e.sessionYear};n?B({id:n,postBody:s}):E(s)})),onReset:V,children:[(0,j.jsxs)(u.Z,{class:!0,children:[(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(d.Z.Group,{className:"mb-3",controlId:"sessionName",children:[(0,j.jsx)(d.Z.Label,{children:b("session name")}),(0,j.jsx)(m.Qr,{control:P,name:"sessionName",render:function(e){var s=e.field,n=s.onChange,t=(s.onBlur,s.value),r=s.ref;return(0,j.jsx)(d.Z.Control,{onChange:n,defaultValue:t,ref:r,isInvalid:_.sessionName,placeholder:b("session name of the session"),type:"text",size:"sm"})}}),_.sessionName&&(0,j.jsx)(d.Z.Text,{className:"text-danger",children:_.sessionName.message})]})}),(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsxs)(d.Z.Group,{className:"mb-3",controlId:"sessionYear",children:[(0,j.jsx)(d.Z.Label,{children:b("session year")}),(0,j.jsx)(m.Qr,{control:P,name:"sessionYear",render:function(e){var s=e.field,n=s.onChange,t=(s.onBlur,s.value),r=s.ref;return(0,j.jsx)(d.Z.Control,{onChange:n,defaultValue:t,ref:r,isInvalid:_.sessionYear,type:"text",size:"sm",placeholder:b("session year of the session")})}}),_.sessionYear&&(0,j.jsx)(d.Z.Text,{className:"text-danger",children:_.sessionYear.message})]})})]}),(0,j.jsx)(u.Z,{children:(0,j.jsx)(c.Z,{sm:4,children:(0,j.jsx)(l.Z,{size:"sm",className:"mt-2",type:"submit",children:L||F?(0,j.jsx)(f.Z,{size:"sm",color:"light"}):b("save change")})})})]})})]})})})})})}},1239:function(e,s,n){n.d(s,{p6:function(){return a}});n(2791);var t=n(6431),r=n.n(t),i=n(184);function a(e){var s=new Date(e),n=""+(s.getMonth()+1),t=""+s.getDate(),r=s.getFullYear();return n.length<2&&(n="0"+n),t.length<2&&(t="0"+t),[r,n,t].join("-")}s.ZP=function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r(),{format:"D MMM YYYY",withTitle:!0,children:e})," ",(0,i.jsx)("br",{})]})}}}]);
//# sourceMappingURL=2162.5db05f9c.chunk.js.map